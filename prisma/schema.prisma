generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./../db/custom.db"
}

model User {
  id        String    @id @default(cuid())
  email     String    @unique
  name      String?
  mobile    String?
  address   String?
  password  String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  projects  Project[]
}

model Project {
  id           String       @id @default(cuid())
  name         String       @unique
  mobileNumber String       @unique
  shareToken   String?      @unique
  isShared     Boolean      @default(false)
  userId       String
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  landRecords  LandRecord[]
  payments     Payment[]
  user         User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  raiyatNames  Raiyat[]
}

model Raiyat {
  id          String       @id @default(cuid())
  name        String
  color       String?      @default("#e5e7eb")
  projectId   String
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  landRecords LandRecord[]
  project     Project      @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model LandRecord {
  id              String   @id @default(cuid())
  timestamp       String
  jamabandiNumber String?
  khataNumber     String?
  khesraNumber    String
  rakwa           String?
  uttar           String?
  dakshin         String?
  purab           String?
  paschim         String?
  remarks         String?
  raiyatId        String
  projectId       String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  project         Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  raiyat          Raiyat   @relation(fields: [raiyatId], references: [id], onDelete: Cascade)
}

model Payment {
  id             String   @id @default(cuid())
  projectId      String
  totalAmount    Float
  receivedAmount Float
  pendingAmount  Float
  paymentDate    String
  status         String   @default("pending")
  paymentType    String?
  description    String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  project        Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}
